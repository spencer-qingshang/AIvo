# 第五章：类、对象与继承 - 补充代码示例

---

### 1. 类 (Class) 与对象 (Object) 示例

这个例子涵盖了类的定义、成员变量、构造方法、`this` 关键字、`static` 关键字和对象的使用。

```java
// 定义一个 Student 类作为模板
class Student {
    // 1. 成员变量 (属性)
    private String name; // 实例变量，每个对象独有一份
    public static String school = "A大学"; // 静态变量，所有对象共享一份
    
    // 2. 构造方法：用于 new 对象时初始化属性
    public Student(String name) {
        // 使用 this 关键字区分成员变量 name 和参数 name
        this.name = name;
        System.out.println("创建了一个新学生: " + this.name);
    }
    
    // 3. 成员方法 (实例方法)：属于对象的行为，必须通过对象调用
    public void study() {
        // this 可以省略，但含义是 "当前这个对象" 正在学习
        System.out.println(this.name + " 正在 " + Student.school + " 学习。");
    }
    
    // 4. 静态方法 (类方法)：属于类的行为，可以直接通过类名调用
    public static void printSchool() {
        // 静态方法中不能使用 this，也不能直接访问非静态变量 name
        // System.out.println(this.name); // 编译错误！
        System.out.println("我们都是 " + school + " 的学生！");
    }
}

public class ClassObjectExample {
    public static void main(String[] args) {
        // --- 对象的使用 ---
        // 1. 创建两个 Student 对象（实例）
        Student s1 = new Student("张三");
        Student s2 = new Student("李四");
        
        // 2. 调用对象的实例方法
        s1.study();
        s2.study();
        
        // --- static 成员的使用 ---
        // 3. 修改静态变量，会影响所有对象
        Student.school = "B大学";
        System.out.println("\n学校更名了...");
        
        s1.study(); // 再次调用，会发现学校已经变了
        
        // 4. 直接通过类名调用静态方法
        Student.printSchool();
    }
}
```

#### 代码输出结果
```
创建了一个新学生: 张三
创建了一个新学生: 李四
张三 正在 A大学 学习。
李四 正在 A大学 学习。

学校更名了...
张三 正在 B大学 学习。
我们都是 B大学 的学生！
```

---

### 2. 继承 (Inheritance) 示例

这个例子展示了子类如何 `extends` 父类，并使用 `super` 关键字和方法重写 `@Override`。

```java
// 1. 定义父类：员工 (Employee)
class Employee {
    String name;
    
    public Employee(String name) {
        this.name = name;
    }
    
    public void work() {
        System.out.println(name + " 正在努力工作...");
    }
}

// 2. 定义子类：经理 (Manager)，继承自员工
class Manager extends Employee {
    private String department; // 子类特有的属性
    
    public Manager(String name, String department) {
        // 3. 使用 super() 调用父类的构造方法，必须放在第一行
        super(name);
        this.department = department;
    }
    
    // 4. 方法重写 (@Override): 对父类的 work 方法不满意，提供新实现
    @Override
    public void work() {
        // 5. 使用 super.work() 调用父类中被重写的方法
        super.work(); 
        System.out.println(name + " 还在管理 " + department + " 部门。");
    }
}

public class InheritanceExample {
    public static void main(String[] args) {
        Employee e = new Employee("普通员工小王");
        Manager m = new Manager("部门经理老张", "技术部");
        
        e.work();
        System.out.println("---");
        m.work(); // 调用的是Manager类中重写后的 work() 方法
    }
}
```

#### 代码输出结果
```
普通员工小王 正在努力工作...
---
部门经理老张 正在努力工作...
部门经理老张 还在管理 技术部 部门。
```

---

### 3. 多态 (Polymorphism) 示例

这个例子展示了多态的核心：父类引用指向子类对象、方法调用的动态绑定以及 `instanceof` 和向下转型。

```java
// 1. 定义父类 Shape
class Shape {
    public void draw() {
        System.out.println("绘制一个图形");
    }
}

// 2. 定义子类 Circle 和 Square
class Circle extends Shape {
    @Override
    public void draw() {
        System.out.println("绘制一个圆形 ○");
    }
    
    // Circle 特有的方法
    public void roll() {
        System.out.println("圆形正在滚动...");
    }
}

class Square extends Shape {
    @Override
    public void draw() {
        System.out.println("绘制一个正方形 □");
    }
}

public class PolymorphismExample {
    public static void main(String[] args) {
        // 3. 向上转型：父类引用指向子类对象
        Shape s1 = new Circle();
        Shape s2 = new Square();
        
        // 4. 多态的体现：调用同一个 draw 方法，表现出不同的行为
        // 编译时看左边（Shape类有draw方法），运行时看右边（执行的是Circle或Square的draw方法）
        s1.draw();
        s2.draw();
        
        // s1.roll(); // 编译错误！因为Shape类没有roll()方法
        
        System.out.println("\n--- 使用 instanceof 和向下转型 ---");
        // 5. 判断一个父类引用指向的到底是不是某个子类的实例
        if (s1 instanceof Circle) {
            // 6. 向下转型：将父类引用强制转为子类引用
            Circle c = (Circle) s1;
            // 现在可以安全地调用子类特有的方法了
            c.roll();
        }
    }
}
```

#### 代码输出结果
```
绘制一个圆形 ○
绘制一个正方形 □

--- 使用 instanceof 和向下转型 ---
圆形正在滚动...
```
