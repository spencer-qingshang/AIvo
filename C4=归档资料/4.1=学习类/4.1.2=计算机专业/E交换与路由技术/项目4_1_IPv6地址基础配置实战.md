# 项目4_1_IPv6地址基础配置实战 (零基础保姆级)

> **实验目标**：从零开始，在 eNSP 中搭建一个支持 IPv6 的网络环境，并手动为路由器和电脑配置 IPv6 地址。
> **适用场景**：eNSP 模拟器，AR2220 路由器。

---

## 一、 知识点大白话解析

> **1. 什么是 IPv6 地址？**
> 想象一下，IPv4 地址就像是 11 位的手机号，因为人太多，号码已经分光了。IPv6 就像是 128 位的超级长号码，多到可以给地球上每一颗沙子都分配一个地址。它的格式是用冒号隔开的，比如 `2001:DB8::1`。
>
> **2. 什么是“全球单播地址” (Global Unicast)？**
> 相当于 IPv4 的“公网 IP”。它是全球唯一的，用来在互联网上到处跑。通常以 `2001::` 开头。
>
> **3. 什么是“链路本地地址” (Link-Local)？**
> 相当于一个“内部短号”。它只在这一根网线的两端有效。只要你开启了 IPv6，系统会自动生成一个以 `FE80::` 开头的地址。它非常重要，很多时候路由器之间交流全靠它。

---

## 二、 物理连线 (从零开始)

### 1. 摆放设备
1.  打开 eNSP，新建拓扑。
2.  左侧选择“路由器”，拖出 **3台 AR2220**，重命名为 `R1`, `R2`, `R3`。
3.  左侧选择“终端”，拖出 **2台 PC**，重命名为 `PC1`, `PC2`。

### 2. 手动连线 (严禁 Auto！)
请使用黑色实线 `Copper`，按照下表连接：

| 起点设备 | 接口 | ----> | 终点设备 | 接口 |
| :--- | :--- | :--- | :--- | :--- |
| **PC1** | Ethernet 0/0/1 | --> | **R1** | **GE 0/0/1** |
| **R1** | **GE 0/0/0** | --> | **R2** | **GE 0/0/0** |
| **R2** | **GE 0/0/1** | --> | **R3** | **GE 0/0/0** |
| **R3** | **GE 0/0/1** | --> | **PC2** | Ethernet 0/0/1 |

**连好后，框选所有设备，点击上方的“开启”按钮，等灯变绿。**

---

## 三、 核心配置步骤

### 1. 开启 IPv6 功能 (必做！)
> **注意**：华为路由器默认是不理 IPv6 的，你必须在全局和每个接口下分别“拍醒”它。

**在 R1 上操作：**
```shell
<Huawei> system-view
[Huawei] sysname R1
[R1] ipv6                        # 第一步：全局开启 IPv6 总开关
```

### 2. 给接口配上门牌号 (IPv6 地址)
我们要配置两个网段：
*   R1-PC1 之间：`2001:1::/64`
*   R1-R2 之间：`2001:12::/64`

**在 R1 上继续：**
```shell
# 配置连接 PC1 的口 (网关)
[R1] interface GigabitEthernet 0/0/1
[R1-GigabitEthernet0/0/1] ipv6 enable             # 接口开启 IPv6
[R1-GigabitEthernet0/0/1] ipv6 address 2001:1::254 64  # 配置全球单播地址
[R1-GigabitEthernet0/0/1] quit

# 配置连接 R2 的口
[R1] interface GigabitEthernet 0/0/0
[R1-GigabitEthernet0/0/0] ipv6 enable
[R1-GigabitEthernet0/0/0] ipv6 address 2001:12::1 64
[R1-GigabitEthernet0/0/0] quit
```

**在 R2 和 R3 上重复类似动作：**
*   **R2**: G0/0/0 配 `2001:12::2/64`；G0/0/1 配 `2001:23::2/64`。
*   **R3**: G0/0/0 配 `2001:23::3/64`；G0/0/1 配 `2001:2::254/64`。

---

## 四、 PC 端的 IPv6 配置
1.  双击 **PC1** -> `基础配置` -> `IPv6配置`。
2.  选择 **静态配置**。
3.  **IPv6地址**：`2001:1::1`
4.  **前缀长度**：`64`
5.  **网关**：`2001:1::254`
6.  **务必点右下角“应用”！** (PC2 同理，地址设为 `2001:2::1`, 网关为 `2001:2::254`)

---

## 五、 验证与检查 (见证奇迹)

### 1. 查看状态
在 R1 上输入：
`display ipv6 interface brief`

*   **看什么？**：
    *   检查 `GigabitEthernet0/0/1` 后面是否显示了 `2001:1::254`。
    *   检查 `Physical` 和 `Protocol` 两列是否都是 **Up**。

### 2. 直连 Ping 测试
在 PC1 的命令行里输入：
`ping 2001:1::254`

*   如果显示 `Reply from ...`，说明你的 PC 已经成功连入 IPv6 世界！

---

## 六、 新手避坑指南 (常见报错)

1.  **报错**：`Error: IPv6 is not enabled.`
    *   **原因**：你直接在接口下配地址，但忘了在全局视图输入 `ipv6` 开启总开关。
2.  **Ping 不通网关？**
    *   **排错 1**：检查 PC 端的网关地址是否填错。
    *   **排错 2**：检查路由器接口下是否漏敲了 `ipv6 enable`。
    *   **排错 3**：确认线有没有插错孔。