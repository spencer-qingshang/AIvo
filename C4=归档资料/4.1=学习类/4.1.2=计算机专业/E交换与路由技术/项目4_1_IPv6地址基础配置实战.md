# 项目4_1_IPv6地址基础配置实战 (超详细保姆级)

> **实验目标**：从零开始，在 eNSP 中搭建一个支持 IPv6 的网络环境，并手动为路由器和电脑配置 IPv6 地址。
> **核心原则**：所有设备必须先开全局 IPv6 开关，再开接口 IPv6 功能。

---

## 一、 物理连线与设备准备

### 1. 摆放设备
1.  新建拓扑。
2.  拖出 **3台 AR2220** 路由器，分别重命名为 `R1`, `R2`, `R3`。
3.  拖出 **2台 PC**，分别重命名为 `PC1`, `PC2`。

### 2. 手动连线 (严禁使用 Auto 自动连线)
请使用 **Copper (黑色实线)** 严格按以下端口连接：

*   **R1** 与 **PC1**：`R1 G0/0/1` <---> `PC1 Ethernet 0/0/1`
*   **R1** 与 **R2**：`R1 G0/0/0` <---> `R2 G0/0/0`
*   **R2** 与 **R3**：`R2 G0/0/1` <---> `R3 G0/0/0`
*   **R3** 与 **PC2**：`R3 G0/0/1` <---> `PC2 Ethernet 0/0/1`

> **操作提示**：连线完成后，框选所有设备，点击工具栏上的“开启设备”按钮（绿色播放键），等待所有接口指示灯变绿。

---

## 二、 路由器详细配置 (不省略任何步骤)

### 1. 配置路由器 R1
```shell
<Huawei> system-view                 # 进入系统视图
[Huawei] sysname R1                  # 修改设备名为 R1
[R1] ipv6                            # 【关键】全局开启 IPv6 功能

# 配置连接 PC1 的接口 (G0/0/1)
[R1] interface GigabitEthernet 0/0/1
[R1-GigabitEthernet0/0/1] ipv6 enable            # 【关键】激活接口的 IPv6 功能
[R1-GigabitEthernet0/0/1] ipv6 address 2001:1::254 64 # 配置全球单播地址 (作为PC1网关)
[R1-GigabitEthernet0/0/1] quit

# 配置连接 R2 的接口 (G0/0/0)
[R1] interface GigabitEthernet 0/0/0
[R1-GigabitEthernet0/0/0] ipv6 enable            # 【关键】激活接口的 IPv6 功能
[R1-GigabitEthernet0/0/0] ipv6 address 2001:12::1 64
[R1-GigabitEthernet0/0/0] quit

[R1] save                            # 保存配置 (输入 y 确认)
```

### 2. 配置路由器 R2 (中间路由器)
```shell
<Huawei> system-view
[Huawei] sysname R2
[R2] ipv6                            # 【关键】全局开启 IPv6 功能

# 配置连接 R1 的接口 (G0/0/0)
[R2] interface GigabitEthernet 0/0/0
[R2-GigabitEthernet0/0/0] ipv6 enable
[R2-GigabitEthernet0/0/0] ipv6 address 2001:12::2 64
[R2-GigabitEthernet0/0/0] quit

# 配置连接 R3 的接口 (G0/0/1)
[R2] interface GigabitEthernet 0/0/1
[R2-GigabitEthernet0/0/1] ipv6 enable
[R2-GigabitEthernet0/0/1] ipv6 address 2001:23::2 64
[R2-GigabitEthernet0/0/1] quit

[R2] save
```

### 3. 配置路由器 R3
```shell
<Huawei> system-view
[Huawei] sysname R3
[R3] ipv6                            # 【关键】全局开启 IPv6 功能

# 配置连接 R2 的接口 (G0/0/0)
[R3] interface GigabitEthernet 0/0/0
[R3-GigabitEthernet0/0/0] ipv6 enable
[R3-GigabitEthernet0/0/0] ipv6 address 2001:23::3 64
[R3-GigabitEthernet0/0/0] quit

# 配置连接 PC2 的接口 (G0/0/1)
[R3] interface GigabitEthernet 0/0/1
[R3-GigabitEthernet0/0/1] ipv6 enable
[R3-GigabitEthernet0/0/1] ipv6 address 2001:2::254 64 # (作为PC2网关)
[R3-GigabitEthernet0/0/1] quit

[R3] save
```

---

## 三、 终端 PC 详细配置

### 1. 配置 PC1
1.  双击 **PC1** 图标，打开配置窗口。
2.  点击 **“基础配置”** 选项卡。
3.  在 **IPv6配置** 区域填写：
    *   **IPv6地址**：`2001:1::1`
    *   **前缀长度**：`64`
    *   **网关**：`2001:1::254`
4.  **重要操作**：点击右下角的 **“应用”** 按钮。

### 2. 配置 PC2
1.  双击 **PC2** 图标。
2.  在 **IPv6配置** 区域填写：
    *   **IPv6地址**：`2001:2::1`
    *   **前缀长度**：`64`
    *   **网关**：`2001:2::254`
3.  **重要操作**：点击右下角的 **“应用”** 按钮。

---

## 四、 验证与自测

### 1. 检查 R1 状态
在 R1 命令行输入：
`display ipv6 interface brief`
*   **检查项**：
    *   G0/0/0 和 G0/0/1 的 `Physical` 和 `Protocol` 必须都是 **Up**。
    *   IP 地址显示正确。

### 2. PC1 连通性测试
打开 PC1 的 **命令行** 选项卡，输入：
`ping 2001:1::254`
*   **结果**：如果看到 `Reply from 2001:1::254...`，说明 PC1 到网关 R1 是通的。
*   **注意**：此时 ping PC2 (`2001:2::1`) 是 **不通的**，因为还没配路由。

---

## 五、 常见问题排查 Checklist
1.  **报错 Error: IPv6 is not enabled** -> 你忘了在系统视图输 `ipv6`。
2.  **Ping 网关 Request timeout** -> 
    *   检查线是不是连错了接口（比如把 G0/0/1 连到了 G0/0/0）。
    *   检查接口下是不是忘了输 `ipv6 enable`。
    *   检查 PC 配置完是不是忘了点“应用”。
