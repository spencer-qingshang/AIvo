# 第七章：常用类 - 补充代码示例

---

### 1. `Object` 类的 `toString()` 和 `equals()` 示例

所有类都默认继承 `Object`，重写这两个方法是Java编程的基本功。

```java
import java.util.Objects;

class Person {
    private String idCard; // 假设身份证号是唯一标识
    private String name;

    public Person(String idCard, String name) {
        this.idCard = idCard;
        this.name = name;
    }

    // 1. 重写 toString() 方法
    // 如果不重写，打印对象会得到类似 "Person@1b6d3586" 的地址信息
    @Override
    public String toString() {
        return "Person{id='" + idCard + "', name='" + name + "'}";
    }

    // 2. 重写 equals() 方法
    // 如果不重写，equals的行为和 == 一样，比较的是内存地址
    @Override
    public boolean equals(Object o) {
        // (1) 如果是同一个对象，肯定相等
        if (this == o) return true;
        // (2) 如果对象是null或者类型不同，肯定不相等
        if (o == null || getClass() != o.getClass()) return false;
        // (3) 向下转型，以便访问子类属性
        Person person = (Person) o;
        // (4) 比较核心内容（这里是身份证号）是否相同
        return Objects.equals(this.idCard, person.idCard);
    }
}

public class ObjectExample {
    public static void main(String[] args) {
        Person p1 = new Person("123", "张三");
        Person p2 = new Person("123", "张三"); // 内容相同，但地址不同
        Person p3 = new Person("456", "李四");

        // 测试 toString()
        System.out.println("p1对象的信息: " + p1.toString()); // 输出: Person{id='123', name='张三'}
        
        // 测试 equals()
        System.out.println("p1 和 p2 是否相等: " + p1.equals(p2)); // 输出: true (因为重写后比较的是idCard)
        System.out.println("p1 和 p3 是否相等: " + p1.equals(p3)); // 输出: false
        
        // 对比 == 
        System.out.println("p1 == p2 ? " + (p1 == p2)); // 输出: false (因为是两个不同的new对象，地址不同)
    }
}
```

---

### 2. `String` (不可变) vs `StringBuffer` (可变) 示例

理解字符串的可变与不可变是关键。

```java
public class StringVsBufferExample {
    public static void main(String[] args) {
        // --- String 的不可变性 ---
        String str = "Hello";
        System.out.println("原始 str 的哈希码: " + System.identityHashCode(str));
        str = str + " World"; // 看起来是修改，实际上是创建了一个新对象
        System.out.println("拼接后 str 的哈希码: " + System.identityHashCode(str)); // 哈希码变了，说明是新对象
        System.out.println(str);

        // --- StringBuffer 的可变性 ---
        StringBuffer sb = new StringBuffer("Hello");
        System.out.println("原始 sb 的哈希码: " + System.identityHashCode(sb));
        sb.append(" World"); // 在原对象上进行修改
        System.out.println("拼接后 sb 的哈希码: " + System.identityHashCode(sb)); // 哈希码没变，说明是同一个对象
        System.out.println(sb.toString()); // 使用toString()转为String
    }
}
```

---

### 3. 随机数生成示例 (`Math.random()` vs `Random` 类)

两者都能生成随机数，但 `Random` 类更灵活。

```java
import java.util.Random;

public class RandomExample {
    public static void main(String[] args) {
        // --- 使用 Math.random() ---
        // 目标：生成一个 [1, 6] 之间的整数（模拟掷骰子）
        // Math.random() 生成 [0.0, 1.0) 的double
        // * 6 -> [0.0, 6.0)
        // + 1 -> [1.0, 7.0)
        // (int) -> 1, 2, 3, 4, 5, 6
        int diceRoll = (int)(Math.random() * 6 + 1);
        System.out.println("Math.random() 掷骰子: " + diceRoll);
        
        // --- 使用 Random 类 ---
        Random random = new Random();
        
        // 目标：生成一个 [1, 6] 之间的整数
        // random.nextInt(6) 生成 [0, 5] 的整数
        // + 1 -> [1, 6]
        int diceRoll2 = random.nextInt(6) + 1;
        System.out.println("Random 类掷骰子: " + diceRoll2);
    }
}
```

---

### 4. 基本类型包装类示例 (装箱、拆箱、类型转换)

包装类让基本类型拥有了对象的能力，是集合框架的基础。

```java
import java.util.ArrayList;
import java.util.List;

public class WrapperExample {
    public static void main(String[] args) {
        // --- 自动装箱与自动拆箱 ---
        int primitiveInt = 10;
        Integer wrapperInt = primitiveInt; // 自动装箱
        System.out.println("包装类对象: " + wrapperInt);
        
        int unboxedInt = wrapperInt; // 自动拆箱
        System.out.println("拆箱后的基本类型: " + unboxedInt);
        
        // 包装类的主要用途：存入集合
        List<Integer> list = new ArrayList<>();
        list.add(100); // 自动装箱
        // list.add("hello"); // 编译错误，因为泛型<Integer>约束了类型
        
        // --- 字符串与基本类型转换 (非常常用) ---
        // 1. 字符串 -> 基本类型
        String numberStr = "123";
        int num = Integer.parseInt(numberStr);
        System.out.println("从字符串解析出的整数: " + (num + 1)); // 输出 124，证明是数字
        
        // 2. 基本类型 -> 字符串
        int anotherNum = 456;
        String str1 = anotherNum + ""; // 最简单的方式
        String str2 = String.valueOf(anotherNum); // 最专业的方式
        System.out.println("转换为字符串: " + str1);
    }
}
```

---

### 5. 日期时间类示例 (`Date` 和 `Calendar`)

`Calendar` 类是操作日期的主要工具，注意月份从0开始。

```java
import java.util.Calendar;
import java.util.Date;

public class DateTimeExample {
    public static void main(String[] args) {
        // --- Date 类：获取当前时间 ---
        Date now = new Date();
        System.out.println("当前时间 (Date对象): " + now);
        
        // --- Calendar 类：获取和设置日期的特定部分 ---
        Calendar cal = Calendar.getInstance(); // 获取代表当前时间的日历对象
        
        // 1. 获取字段
        int year = cal.get(Calendar.YEAR);
        int month = cal.get(Calendar.MONTH) + 1; // 月份从0开始，所以要+1
        int day = cal.get(Calendar.DAY_OF_MONTH);
        int hour = cal.get(Calendar.HOUR_OF_DAY); // 24小时制
        int minute = cal.get(Calendar.MINUTE);
        int second = cal.get(Calendar.SECOND);
        
        System.out.println("当前时间 (通过Calendar获取): " + year + "-" + month + "-" + day + " " + hour + ":" + minute + ":" + second);
        
        // 2. 设置字段
        cal.set(Calendar.YEAR, 2025); // 将年份设置为2025
        cal.set(Calendar.MONTH, 0); // 设置为1月 (0是一月)
        
        // 3. 从Calendar对象获取Date对象
        Date futureDate = cal.getTime();
        System.out.println("修改后的日期: " + futureDate);
    }
}
```
